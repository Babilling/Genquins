<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Babigital Tournament</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}"/>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css"
          href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css"/>
    <link href="//cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

</head>
<body>
<div class="container">
    <h1 class="animated tada" style="text-align:center;">Babigital Tournament</h1>
    <table id="matches" class="table table-bordered table-striped table-dark" style="width:100%;">
        <thead style="text-align:center;">
        <tr>
            <th>Player 1</th>
            <th>Player 2</th>
            <th>Winner</th>
            <th>Scores</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody id="match">
        <tr th:each="match : ${matchs}">
            <td th:utext="${match.participant1.name}">...</td>
            <td th:utext="${match.participant2.name}">...</td>
            <td th:utext="${match.winner_id}">...</td>
            <td th:utext="${match.scores}" style="text-align:center;">...</td>
            <td>
                <div style="text-align:center">
                    <button th:attr="data-participant1-name=${match.participant1.name}, data-participant2-name=${match.participant2.name},
                     data-participant1-id=${match.participant1.id}, data-participant2-id=${match.participant2.id},
                     data-match-id=${match.id}, data-target='#scoresModal'"
                            type="button" data-toggle="modal" class="btn btn-primary">
                        <i class="fa fa-check-square-o fa-lg" aria-hidden="true"></i>
                    </button>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="modal fade" id="scoresModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Rapporter les scores</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <form id="saveForm" action="#" th:action="@{/save}" th:object="${matchToSave}" method="post">
                    <input type="hidden" id="matchToSaveId" th:field="*{id}">
                    <input type="hidden" id="matchToSaveParticipant1Id" th:field="*{participant1.id}">
                    <input type="hidden" id="matchToSaveParticipant2Id" th:field="*{participant2.id}">
                    <div class="modal-body">
                        <div class="form-group row">
                            <label for="participant1Score" class="col-sm-2 col-form-label"
                                   id="participant1Name"></label>
                            <div class="col-sm-10">
                                <input type="number" max="10" class="form-control" id="participant1Score"
                                       th:field="*{participant1.score}">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="participant2Score" class="col-sm-2 col-form-label"
                                   id="participant2Name"></label>
                            <div class="col-sm-10">
                                <input type="number" max="10" class="form-control" id="participant2Score"
                                       th:field="*{participant2.score}">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer justify-content-center">
                        <button type="submit" class="btn btn-warning">ENVOYER LES SCORES</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="//code.jquery.com/jquery-3.3.1.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="//cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<script src="//cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
<script src="//cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>

<script th:src="@{/js/index.js}"></script>
</body>
</html>
